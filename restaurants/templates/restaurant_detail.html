{% extends "base.html" %} {% load static %} {% block page_content %}
{% load crispy_forms_tags %}

<h1 class="text-center mb-4 mt-4">{{ restaurant.name|title }}</h1>
<div class="row">
  <div class="col-md-8">
    <img src="{% static 'frank.jpg' %}" alt="My image", width="100%">
    </div>
  <div class="col-md-4">
    <h5>About the restaurant:</h5>
    <p>{{ restaurant.description }}</p>
    <br>
    <h5>Address:</h5>
    <p>{{ restaurant.address }}</p>
    <h5>Cheapest slice (last reported price):</h5>
    <p>{{ restaurant.comments.last.cheapestslice }}</p>
    <h5>On a scale from 1 to 5 did users like this restaurant?:</h5>
    <h5>Bang for buck:</h5>

  {% comment %} UPDATE RESTAURANT {% endcomment %}
  <form method="POST" action="{% url 'restaurant_update' restaurant.pk %}">
    {% csrf_token %}
    <input type="submit" value="Update restaurant" class="btn btn-warning" />
  </form>

    {% comment %} DELETE RESTAURANT {% endcomment %}
  <form method="POST" action="{% url 'restaurant_delete' restaurant.pk %}">
    {% csrf_token %}
    <input type="submit" value="Delete restaurant" class="btn btn-danger" />
  </form>

</div>
</div>



<hr>




{% comment %} DISPLAY COMMENTS {% endcomment %}
  {% for comment in restaurant.comments.all %}
  <div class="col-md-4">
    <div class="card mb-2">
      <div class="card-body">
        <h5 class="card-title">{{ comment.username|title }}</h5>
        <p class="card-text">{{ comment.body }}</p>
        <p class="card-text">{{ comment.quality }} / 5</p>
        <p class="card-text">{{ comment.cheapestslice }} $</p>
        <p class="card-text">{{ comment.created|date:"j / n / Y" }}</p>


      </div>

      <form method="POST" action="{% url 'comment_update' pk=comment.pk %}">
        {% csrf_token %}
        <input type="submit" value="Update comment" class="btn btn-warning" />
      </form>

      <form method="POST" action="{% url 'comment_delete' pk=comment.pk %}">
        {% csrf_token %}
        <input type="submit" value="Delete comment" class="btn btn-danger" />
      </form>
    </div>
  </div>
  {% endfor %}


{% comment %} CREATE COMMENT {% endcomment %}

  <h1>Tell us about your experience at this restaurant !</h1>
  <form method="POST" action="{% url 'restaurant_detail' pk=restaurant.pk %}">
    {% csrf_token %}
    {{form|crispy}}
    <input type="submit" value="Add comment" class="btn btn-primary" />
  </form>

  <a class="btn btn-primary" href="/">get me to main page </a>

  {% endblock %}
